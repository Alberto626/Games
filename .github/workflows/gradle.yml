name: Java CI
on: [push]

jobs:
    build:
      runs-on: ubuntu-latest
      steps:
        - uses: actions:/checkout@v3
        - name: Set up JDK 17
          uses: actions/setup-java@v3
          with:
            java-version: 17
            distribution: 'adopt'
        - name: Build with Gradle
          run: ./gradlew build
        - name: Deploy to Server
          uses: easingthemes/ssh-deploy@main
          env:
            SSH_PRIVATE_KEY: ${ { secrets.EC2_SSH_KEY }}
            REMOTE_HOST: ${ { secrets.HOST_DNS }}
            REMOTE_USER: ${ { secrets.USERNAME }}
            TARGET: ${ { secrets.TARGET_DIR }}
            